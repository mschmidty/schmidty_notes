<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Some AIM Data Visualizations from Work</title>
    <meta name="description" content="">
    <link rel="stylesheet" href="/css/main.css">
  </head>
  <body>
    <header>
      
    </header>

    <main>
      <article class="post-content">
  <header class="post-header">
    <h1 class="post-title">Some AIM Data Visualizations from Work</h1>
    <div class="post-meta">
      <time datetime="Invalid DateTime" class="post-time">November 04, 2021</time>
      <span>| tags:</span>
      <ul class="tags-list post-tag-list">
      
        
        <li><a href="/tags/r/" class="tag-list-tag">R</a></li>
      
        
        <li><a href="/tags/r/" class="tag-list-tag">R</a></li>
      
        
        <li><a href="/tags/rmd/" class="tag-list-tag">Rmd</a></li>
      
        
        <li><a href="/tags/aim/" class="tag-list-tag">AIM</a></li>
      
      </ul>
    </div>
  </header>
  <p>I don't put a lot of what I do at work here.  I try to keep work at work and a lot of what I post here is for fun. Lately though, I've been producing some visualizations from <a href="https://aim.landscapetoolbox.org/">Assessment Inventory and Monitoring (AIM)</a> data that I think are worth sharing.</p>
<p>&lt;!--more--&gt;</p>
<h2>Species Richness</h2>
<p>As part of the AIM protocol we try to identify every plant that occurs at each site.  The first visualization is a column plot of the percentage of vegetation sites that a species of each plant was identified  at, visualized by strata.</p>
<figure><a href="/img/r/assets/most_abundant_plants_by_strata_large_white_small_v2.png"><img src="/img/r/assets/most_abundant_plants_by_strata_large_white_small_v2.png" alt="Species Richness"></a></figure>
<h2>And the Scripts</h2>
<pre><code class="language-r">sci_name_count%&gt;%
  filter(prop_total&gt;=.10 &amp; !is.na(scientific_name))%&gt;%
  arrange(Strata, desc(total))%&gt;%
    ggplot()+
    geom_col(aes(scientific_name, prop_n, fill=Strata))+
    coord_flip()+
    geom_text(aes(scientific_name, prop_total, label=prop_total_text), 
              color=&quot;#8C8C8C&quot;, 
              size=5.25,
              hjust = -0.25
              )+
    scale_fill_manual(values = pal2)+
    scale_y_continuous(labels = scales::percent)+
    theme(
      plot.background = element_rect(fill=&quot;#FFFFFF&quot;),
      panel.background = element_rect(fill=&quot;#FFFFFF&quot;),
      text = element_text(size=16),
      plot.title = element_text( size=35),
      axis.text = element_text(size=16),
      legend.position=&quot;top&quot;,
      plot.title.position = &quot;plot&quot;, 
      plot.caption.position =  &quot;plot&quot;
    )+labs(
      title=&quot;Most Common Plants Found on the Tres Rios Field Office&quot;,
      subtitle = &quot;2018 to 2020, % of plots where species were found, by Strata.  Only plants that occured on more than 10% of plots are included.&quot;,
      caption = &quot;Source: Tres Rios Field Office AIM Data | By Mike Schmidt&quot;,
      x=&quot;&quot;,
      y=&quot;&quot;,
      fill=&quot;Strata&quot;
    )+ggsave(&quot;test/output/most_abundant_plants_by_strata_large_white.png&quot;, h=45, w=17.5, type=&quot;cairo&quot;, dpi=600)
</code></pre>
<h2>Species Richness Another Way</h2>
<p>Here is the same plot but faceted by strata.</p>
<figure><a href="/img/r/assets/most_abundant_plants_within_each_strata_large_white2_small.png"><img src="/img/r/assets/most_abundant_plants_within_each_strata_large_white2_small.png" alt="Species Richness Faceted by Strata"></a></figure>
<h2>The Scripts</h2>
<pre><code class="language-r">sci_name_count%&gt;%
  filter(prop_strata&gt;=.30 &amp; !is.na(scientific_name))%&gt;%
  mutate(
    scientific_name = as.factor(scientific_name),
    scientific_name = reorder_within(scientific_name, prop_strata, Strata)
  )%&gt;%
  arrange(Strata, desc(total))%&gt;%
    ggplot()+
    geom_col(aes(scientific_name, prop_strata, fill=Strata))+
    coord_flip()+
    facet_wrap(~Strata, scales = &quot;free&quot;, ncol=2)+
    scale_fill_manual(values = pal2)+
    scale_y_continuous(labels = scales::percent)+
    scale_x_reordered()+
    theme(
      plot.background = element_rect(fill=&quot;#FFFFFF&quot;),
      panel.background = element_rect(fill=&quot;#FFFFFF&quot;),
      text = element_text(size=16),
      plot.title = element_text( size=35),
      axis.text = element_text(size=16),
      legend.position=&quot;none&quot;,
      plot.title.position = &quot;plot&quot;, #NEW parameter. Apply for subtitle too.
      plot.caption.position =  &quot;plot&quot;,
      strip.text.x = element_text(
        size = 10, color = &quot;#8C8C8C&quot;, face = &quot;bold.italic&quot;
        )
    )+labs(
      title=&quot;Most Common Plants Found in Each Strata&quot;,
      subtitle = &quot;2018 to 2020 percent of plots where species was found, by Strata.  Only plants that occured on more than 25% plots within a strata are included.&quot;,
      caption = &quot;Source: Tres Rios Field Office AIM Data | By Mike Schmidt&quot;,
      x=&quot;&quot;,
      y=&quot;&quot;,
      fill=&quot;Strata&quot;
    )
</code></pre>

</article>

    </main>

    <footer></footer>

    <!-- Current page: /blog/r/2021-11-04-some_aim_data_visualizations/ -->
  </body>
</html>