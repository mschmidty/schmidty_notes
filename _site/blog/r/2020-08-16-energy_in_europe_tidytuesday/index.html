<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TidyTuesday: Energy Usage in Europe</title>
    <meta name="description" content="">
    <link rel="stylesheet" href="/css/main.css">
  </head>
  <body>
    <header>
      
    </header>

    <main>
      <article class="post-content">
  <header class="post-header">
    <h1 class="post-title">TidyTuesday: Energy Usage in Europe</h1>
    <div class="post-meta">
      <time datetime="Invalid DateTime" class="post-time">August 16, 2020</time>
      <span>| tags:</span>
      <ul class="tags-list post-tag-list">
      
        
        <li><a href="/tags/r/" class="tag-list-tag">R</a></li>
      
        
        <li><a href="/tags/r/" class="tag-list-tag">R</a></li>
      
        
        <li><a href="/tags/ggplot/" class="tag-list-tag">ggplot</a></li>
      
        
        <li><a href="/tags/tidytuesday/" class="tag-list-tag">tidytuesday</a></li>
      
      </ul>
    </div>
  </header>
  <p>I haven't had a ton of time lately.  On a recent road trip, I tried out a <a href="https://github.com/rfordatascience/tidytuesday">Tidy Tuesday</a> submission on European evergy usage. Because I didn't have enough time, I wanted to make something simple and work on making it really easy to read. I think I did that.  I would have liked to do a bit more with the theme. Maybe next time.</p>
<p>I was inspired by <a href="https://twitter.com/MaiaPelletier">@MaiaPelletier</a> and <a href="https://github.com/MaiaPelletier/tidytuesday/blob/master/images/2020_Week32_EUEnergy.png">her circular version using the same data</a> - which is amazing.</p>
<p>The final product:
<img src="/img/r/assets/tidy_tuesday/europe_energy_v1.png" alt="Percent of Renewable Energy By country"></p>
<p>And the scripts:</p>
<pre><code class="language-r">library(tidytuesdayR)
library(tidyverse)
library(here)
extrafont::loadfonts()

theme_set(theme_light()+
            theme(
              text=element_text(family=&quot;Public Sans Light&quot;)
            ))

energy_data &lt;- tidytuesdayR::tt_load('2020-08-04')

energy_types &lt;- energy_data$energy_types
country_totals &lt;- energy_data$country_totals

country_totals%&gt;%
  count(level)

total_energy&lt;-country_totals%&gt;%
  select(-`2017`, -`2016`, -level)%&gt;%
  pivot_wider(names_from=type, values_from=`2018`)%&gt;%
  janitor::clean_names()%&gt;%
  mutate(total_energy_use = total_net_production+imports-exports-energy_absorbed_by_pumping)%&gt;%
  select(country, total_energy_use)

percent_renewable&lt;-energy_types%&gt;%
  select(-`2016`, -`2017`, -`level`)%&gt;%
  pivot_wider(names_from=type, values_from=`2018`)%&gt;%
  janitor::clean_names()%&gt;%
  mutate(
    renewable=hydro+wind+solar+geothermal+pumped_hydro_power, 
    non_renewable = conventional_thermal+nuclear+other,
    percent_renewable = renewable/(renewable+non_renewable)
    )%&gt;%
  left_join(total_energy)%&gt;%
  mutate(
    country_name=ifelse(is.na(country_name), &quot;United Kingdom&quot;, country_name),
    other_percent_renewable = renewable/total_energy_use)

View(percent_renewable)

percent_renewable%&gt;%
  mutate(country_name=fct_reorder(country_name, other_percent_renewable))%&gt;%
  ggplot(aes(country_name, other_percent_renewable))+
  geom_segment( aes(x=country_name, xend=country_name, y=0, yend=other_percent_renewable), color=&quot;#CCCCCC&quot;) +
  geom_point( color=&quot;#444444&quot;, size=3, shape=21, fill=&quot;#ffffff&quot;) +
  coord_flip()+
  theme(
    plot.margin = margin(20, 20, 20, 20),
    plot.background = element_rect(color=&quot;#F2F0EA&quot;),
    panel.background = element_blank(),
    panel.grid.major.x = element_blank(),
    panel.grid.major.y = element_blank(),
    panel.grid.minor.x = element_blank(),
    panel.border = element_blank(),
    axis.line=element_blank(),
    axis.ticks.y = element_blank(),
    axis.text.x = element_text(size = 9),
    axis.text.y = element_text(margin = margin(t = 30)),
    axis.title = element_text(size=11, color=&quot;#888888&quot;),
    plot.title = element_text(hjust = 0.5, 
                              size = 12,
                              family=&quot;Public Sans Bold&quot;,
                              color=&quot;#333333&quot;,
                              margin = margin(10, 0, 3, 0)),
    plot.subtitle = element_text(hjust = 0.5, 
                                size = 8,
                                color = &quot;#888888&quot;,  
                                face = &quot;italic&quot;),
    plot.caption = element_text(size=8,
                                color = &quot;#dddddd&quot;,
                                margin = margin(10, 0, 0, 0))
  )+
  xlab(&quot;&quot;) +
  ylab(&quot;Percent Renewable&quot;)+
  labs(title=&quot;Energy Use in Europe&quot;,
       subtitle=&quot;% of energy that comes from renewable sources.&quot;,
       caption = &quot;@mschmidty | #TidyTuesday | Data: Eurosatat&quot;)+ scale_y_continuous(labels = scales::percent)+

  ggsave(here(&quot;Dropbox&quot;, &quot;r&quot;, &quot;tidy_tuesday&quot;, &quot;figures&quot;, &quot;europe_energy_v1.png&quot;), type='cairo', height=6.5)
</code></pre>

</article>

    </main>

    <footer></footer>

    <!-- Current page: /blog/r/2020-08-16-energy_in_europe_tidytuesday/ -->
  </body>
</html>