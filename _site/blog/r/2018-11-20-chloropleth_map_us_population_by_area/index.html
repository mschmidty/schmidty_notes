<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Making a Chloropleth Map in R</title>
    <meta name="description" content="">
    <link rel="stylesheet" href="/css/main.css">
  </head>
  <body>
    <header>
      
    </header>

    <main>
      <article class="post-content">
  <header class="post-header">
    <h1 class="post-title">Making a Chloropleth Map in R</h1>
    <div class="post-meta">
      <time datetime="Invalid DateTime" class="post-time">November 20, 2018</time>
      <span>| tags:</span>
      <ul class="tags-list post-tag-list">
      
        
        <li><a href="/tags/r/" class="tag-list-tag">R</a></li>
      
        
        <li><a href="/tags/gis/" class="tag-list-tag">GIS</a></li>
      
        
        <li><a href="/tags/r/" class="tag-list-tag">R</a></li>
      
      </ul>
    </div>
  </header>
  <figure><a href="/img/r/assets/maps/chloropleth_county_population.jpeg"><img src="/img/r/assets/maps/chloropleth_county_population.jpeg" alt="image"></a></figure>
<p>Load the libraries.</p>
<pre><code class="language-r">library(tidyverse)
</code></pre>
<p>Load the data and subset the area csv to just the columns we need.</p>
<pre><code class="language-r">data&lt;-read_csv(&quot;https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2018-04-30/week5_acs2015_county_data.csv&quot;)
area&lt;-read_csv(&quot;/Users/michaelschmidt/Downloads/county_area.csv&quot;)%&gt;%
  rename(fips=STCOU, area=LND010190D)%&gt;%
  mutate(CensusId=as.integer(fips))%&gt;%
  select(CensusId,area)
</code></pre>
<p>Clean the two datasets and merge them together.</p>
<pre><code class="language-r">data_cl&lt;-data%&gt;%
  mutate(subregion=tolower(County))%&gt;%
  select(CensusId, subregion, TotalPop)%&gt;%
  left_join(area)%&gt;%
  mutate(people_per_sq_mile=TotalPop/area)%&gt;%
  select(subregion, people_per_sq_mile)
data_cl
</code></pre>
<p>Merge the dataset to county data from the <code>maps</code> package.</p>
<pre><code class="language-r">county&lt;-map_data(&quot;county&quot;)%&gt;%
  left_join(data_cl)
</code></pre>
<p>Plot the data with <code>ggplot</code> using <code>geom_polygon</code>.</p>
<pre><code class="language-r">my_breaks &lt;- c(10, 100, 1000, 10000, 20000)
ggplot(data=county)+
  geom_polygon(aes(x=long, y=lat, fill=people_per_sq_mile, group=group))+
  coord_map()+
  scale_fill_gradient(low = &quot;#fcfbfd&quot;, high = &quot;#3f007d&quot;, trans = &quot;log&quot;, breaks = my_breaks, labels = my_breaks)+
  theme_void()+
  guides(fill=guide_legend(title=&quot;Pop/Mile^2&quot;))+
  theme(plot.title = element_text(size = 25, face = &quot;bold&quot;, hjust = 0.5), panel.background = element_rect(fill = &quot;#f9f9f9&quot;), plot.background = element_rect(fill = &quot;#f9f9f9&quot;), legend.position = c(0.9, 0.2))
</code></pre>
<h3>Resources</h3>
<ul>
<li><a href="/r/assets/maps/maps_resources/county_area.csv">Area CSV Data</a></li>
</ul>

</article>

    </main>

    <footer></footer>

    <!-- Current page: /blog/r/2018-11-20-chloropleth_map_us_population_by_area/ -->
  </body>
</html>